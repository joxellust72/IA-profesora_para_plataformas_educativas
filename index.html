<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <title>Chat con WebLLM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Librer√≠as para RAG Local -->
    <script src="https://cdn.jsdelivr.net/npm/@xenova/transformers@2.17.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/voy-search@0.6.2/dist/voy.min.js"></script>
    <script src="//mozilla.github.io/pdf.js/build/pdf.mjs" type="module"></script>

    <!-- Nueva fuente para el efecto de pizarra -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Nunito', sans-serif;
      }
      /* Clase para la fuente de pizarra */
      .msg .bot {
        color: rgb(255, 0, 204);
        font-weight: bold;
      }
      .msg .user {
        color: rgb(0, 157, 255);
        font-weight: bold;
      }
      .chalk-font {
        font-family: 'Permanent Marker', cursive;
        font-size: 1.1rem; /* Hacemos la fuente un poco m√°s grande para que se lea mejor */
      }
    </style>
  </head>
  <body class="h-screen w-full bg-cover bg-center overflow-hidden" style="background-image: url('img/background.png');">

    <div class="h-full w-full flex flex-row items-end justify-center">

      <!-- Columna Izquierda: Tablero -->
      <div class="w-1/3 h-full flex items-center justify-center">
        <div class="w-[90%] h-[80%] bg-contain bg-no-repeat bg-center" style="background-image: url('img/fondochat.png');">
          <!-- El tablero es solo visual, no necesita contenido -->
        </div>
      </div>

      <!-- Columna Central: Chat e Inputs -->
      <div class="w-1/3 h-full flex flex-col justify-end items-center pb-6">
        <div class="w-full max-w-md mx-auto">
          <div class="w-1/2 bg-pink-200 border-2 border-pink-300 rounded-lg py-2 text-center shadow-lg mb-2">
            <span class="text-center font-bold">Profesora Ana</span>
          </div>
          <div id="chat" class="w-full h-64 bg-white/80 rounded-lg p-4 text-gray-800 mb-4 resize-none shadow-lg overflow-y-auto" 
               style="backdrop-filter: blur(4px);">
            <!-- El contenido del chat se genera con JS -->
          </div>
        </div>

        <!-- Input de mensaje y botones -->
        <div class="w-full max-w-md bg-white/70 p-4 flex items-center space-x-2 rounded-lg shadow-md">
          <input type="file" id="file-input" class="hidden" accept=".txt,.pdf">
          <button id="upload-btn" class="bg-green-500 hover:bg-green-600 text-white p-3 rounded-lg" title="Aprender de Documento">üìÑ</button>

          <input id="user-input" type="text" placeholder="Escribe un mensaje..." 
                class="flex-1 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-pink-400">
          
          <button id="mic-btn" class="bg-pink-400 hover:bg-pink-500 text-white p-3 rounded-lg">üé§</button>
          <button id="stop-btn" class="bg-pink-400 hover:bg-pink-500 text-white p-3 rounded-lg hidden">‚è∏Ô∏è</button>
          <button id="send-btn" class="bg-pink-400 hover:bg-pink-500 text-white p-3 rounded-lg">‚û§</button>
        </div>
      </div>

      <!-- Columna Derecha: Personaje -->
      <div class="w-1/3 h-full relative">
        <img id="imagen-character" src="img/normal.png" alt="Personaje" 
             class="absolute bottom-0 left-1/2 -translate-x-1/2 h-auto w-[30rem] max-h-[90%] pointer-events-none"
             style="filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1));">
      </div>
    </div>
    <script src="app.js" type="module"></script>
</body>
</html>